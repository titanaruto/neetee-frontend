"use strict";var overlay_show,account__radio_list=document.querySelector(".account__radio-list"),add_address_additional=document.querySelector(".profile-page__params-label-address"),copy_btn=document.getElementById("btn-copy"),file_profile=document.getElementById("file-profile"),add_advert_list=document.querySelector(".add-advert__list"),copy_input=document.getElementById("refer"),document_input=document.getElementById("document_input"),high_price=document.getElementById("high-price"),prices__wrap=document.querySelector(".prices__wrap"),overlay=document.querySelector(".overlay"),view_product=document.querySelector(".sorting__list-view"),dogovor_check=document.querySelector("#dogovor_check"),sorting_form=document.querySelector("#sorting-form"),sorting_wrapper=document.querySelector(".products__sorting-wrapper"),products__all_wrapper=document.querySelector(".products__all-wrapper"),form_header=document.querySelector(".form-header"),login=document.querySelector(".main-header__btn--login"),login_form=document.querySelector(".form-header__btn-login"),registration=document.querySelector(".main-header__btn--registration"),registration_form=document.querySelector(".form-header__btn-registration"),close_form=document.querySelector(".form-header__icon--close"),captcha_test=document.querySelector("#form-header__captcha"),handlerClickMoney=function(e){var s=e.target;if("I"===s.nodeName&&s.classList.contains("prices__icon")&&s.parentElement.classList.contains("prices__submit")||"BUTTON"===s.nodeName&&s.classList.contains("prices__submit")){if("BUTTON"===s.nodeName&&s.classList.contains("prices__submit"))s.classList.add("prices__submit--disable"),s.parentElement.querySelector(".prices__list").classList.add("prices__list--show"),overlay.classList.add("overlay--show"),null!=(overlay_show=document.querySelector(".overlay--show"))&&overlay_show.addEventListener("click",handlerClickOverlayClose);else if("I"===s.nodeName&&s.classList.contains("prices__icon")){s.parentElement.classList.add("prices__submit--disable"),s.parentElement.parentElement.querySelector(".prices__list").classList.add("prices__list--show"),overlay.classList.add("overlay--show"),null!=(overlay_show=document.querySelector(".overlay--show"))&&overlay_show.addEventListener("click",handlerClickOverlayClose)}}else if("I"===s.nodeName&&s.classList.contains("prices__icon")&&s.parentElement.classList.contains("prices__item")||"LI"===s.nodeName&&s.classList.contains("prices__item"))if("I"===s.nodeName&&s.classList.contains("prices__icon")&&s.parentElement.classList.contains("prices__item")){var t=s.parentElement.parentElement;t.parentElement.querySelector(".prices__submit").classList.remove("prices__submit--disable"),t.classList.remove("prices__list--show");for(var r=prices__wrap.querySelectorAll(".prices__submit .prices__icon"),a=0;a<r.length;a++)r[a].classList.contains("fa-ruble-sign")?r[a].classList.remove("fa-ruble-sign"):r[a].classList.contains("fa-dollar-sign")?r[a].classList.remove("fa-dollar-sign"):r[a].classList.contains("fa-euro-sign")?r[a].classList.remove("fa-euro-sign"):r[a].classList.contains("fa-yen-sign")&&r[a].classList.remove("fa-yen-sign"),s.classList.contains("fa-ruble-sign")?r[a].classList.add("fa-ruble-sign"):s.classList.contains("fa-dollar-sign")?r[a].classList.add("fa-dollar-sign"):s.classList.contains("fa-euro-sign")?r[a].classList.add("fa-euro-sign"):s.classList.contains("fa-yen-sign")&&r[a].classList.add("fa-yen-sign");overlay_show.classList.remove("overlay--show")}else if("LI"===s.nodeName&&s.classList.contains("prices__item")){for(var i=prices__wrap.querySelectorAll(".prices__submit .prices__icon"),o=0;o<i.length;o++)i[o].classList.contains("fa-ruble-sign")?i[o].classList.remove("fa-ruble-sign"):i[o].classList.contains("fa-dollar-sign")?i[o].classList.remove("fa-dollar-sign"):i[o].classList.contains("fa-euro-sign")?i[o].classList.remove("fa-euro-sign"):i[o].classList.contains("fa-yen-sign")&&i[o].classList.remove("fa-yen-sign"),s.firstElementChild.classList.contains("fa-ruble-sign")?i[o].classList.add("fa-ruble-sign"):s.firstElementChild.classList.contains("fa-dollar-sign")?i[o].classList.add("fa-dollar-sign"):s.firstElementChild.classList.contains("fa-euro-sign")?i[o].classList.add("fa-euro-sign"):s.firstElementChild.classList.contains("fa-yen-sign")&&i[o].classList.add("fa-yen-sign");var c=s.parentElement;c.parentElement.querySelector(".prices__submit").classList.remove("prices__submit--disable"),c.classList.remove("prices__list--show"),overlay_show.classList.remove("overlay--show")}};null!=prices__wrap&&prices__wrap.addEventListener("click",handlerClickMoney);var handlerClickSortingForm=function(e){sorting_wrapper.classList.toggle("products__sorting-wrapper--active"),overlay.classList.toggle("overlay--show"),(overlay_show=document.querySelector(".overlay--show")).addEventListener("click",handlerClickOverlayClose)};null!=sorting_form&&sorting_form.addEventListener("click",handlerClickSortingForm);var handlerClickSortingWrapper=function(e){var s=e.target;"INPUT"!==s.nodeName&&"svg"!==s.nodeName&&"use"!==s.nodeName||(sorting_wrapper.classList.remove("products__sorting-wrapper--active"),overlay.classList.remove("overlay--show"))};null!=sorting_wrapper&&sorting_wrapper.addEventListener("click",handlerClickSortingWrapper);var handlerTabsClickProducts=function(e){var s=e.target;if("I"===s.nodeName&&s.classList.contains("product-item__icon")){var t=s.parentElement.parentElement.parentElement;t.dataset.id;t.querySelector(".product-item__title").classList.add("product-item__title--show"),t.querySelector(".product-item__wrapper").classList.add("product-item__wrapper--disabled"),t.querySelector(".product-item__description-mb").classList.add("product-item__description-mb--disabled"),t.querySelector(".product-item__information-line-wrapper").classList.add("product-item__information-line-wrapper--disabled"),t.querySelector(".product-item__info").classList.remove("product-item__info--show"),t.querySelector(".product-item__star").classList.remove("product-item__star--show"),t.querySelector(".product-item__author").classList.remove("product-item__author--show"),t.querySelector(".product-item__basket").classList.remove("product-item__basket--show"),t.querySelector(".product-item__icon--briefcase").classList.remove("product-item__icon--briefcase-active"),t.querySelector(".product-item__icon--star").classList.remove("product-item__icon--star-active"),t.querySelector(".product-item__icon--profile").classList.remove("product-item__icon--profile-active"),t.querySelector(".product-item__icon--buy").classList.remove("product-item__icon--buy-active"),s.classList.contains("product-item__icon--briefcase")?(t.querySelector(".product-item__info").classList.add("product-item__info--show"),s.classList.add("product-item__icon--briefcase-active")):s.classList.contains("product-item__icon--star")?(t.querySelector(".product-item__star").classList.add("product-item__star--show"),s.classList.add("product-item__icon--star-active")):s.classList.contains("product-item__icon--profile")?(t.querySelector(".product-item__author").classList.add("product-item__author--show"),s.classList.add("product-item__icon--profile-active")):s.classList.contains("product-item__icon--buy")&&(t.querySelector(".product-item__basket").classList.add("product-item__basket--show"),s.classList.add("product-item__icon--buy-active"))}};null!=products__all_wrapper&&products__all_wrapper.addEventListener("click",handlerTabsClickProducts);var handlerFormHeaderClickLogin=function(e){e.preventDefault();e.target;if(form_header.classList.add("form-header--show"),document.documentElement.clientWidth<1170){30;var s=((form_header.clientWidth-30)/304).toFixed(2);captcha_test.style.transform="scale("+s+")",captcha_test.style.transformOrigin="left top"}overlay.classList.add("overlay--show"),null!=(overlay_show=document.querySelector(".overlay--show"))&&overlay_show.addEventListener("click",handlerClickOverlayClose),registration_form.classList.remove("form-header__btn--active"),document.getElementById("email").classList.remove("form-header__inputs--show"),document.getElementById("repeatPassword").classList.remove("form-header__inputs--show"),document.getElementById("nameRefer").classList.remove("form-header__inputs--show"),document.querySelector(".form-header__submit-registration").classList.remove("form-header__submit--active"),login_form.classList.add("form-header__btn--active"),document.getElementById("nickname").classList.add("form-header__inputs--show"),document.getElementById("password").classList.add("form-header__inputs--show"),document.querySelector(".form-header__btn-wrapper-info").classList.add("form-header__btn-wrapper-info--show"),document.querySelector(".form-header__socials").classList.add("form-header__socials--show"),document.querySelector(".form-header__submit-login").classList.add("form-header__submit--active")},handlerFormHeaderClickRegistration=function(e){e.preventDefault();e.target;if(form_header.classList.add("form-header--show"),document.documentElement.clientWidth<1170){30;var s=((form_header.clientWidth-30)/304).toFixed(2);captcha_test.style.transform="scale("+s+")",captcha_test.style.transformOrigin="left top"}overlay.classList.add("overlay--show"),null!=(overlay_show=document.querySelector(".overlay--show"))&&overlay_show.addEventListener("click",handlerClickOverlayClose),login_form.classList.remove("form-header__btn--active"),document.querySelector(".form-header__btn-wrapper-info").classList.remove("form-header__btn-wrapper-info--show"),document.querySelector(".form-header__socials").classList.remove("form-header__socials--show"),document.querySelector(".form-header__submit-login").classList.remove("form-header__submit--active"),registration_form.classList.add("form-header__btn--active"),document.getElementById("nickname").classList.add("form-header__inputs--show"),document.getElementById("email").classList.add("form-header__inputs--show"),document.getElementById("password").classList.add("form-header__inputs--show"),document.getElementById("repeatPassword").classList.add("form-header__inputs--show"),document.getElementById("nameRefer").classList.add("form-header__inputs--show"),document.querySelector(".form-header__submit-registration").classList.add("form-header__submit--active")};null!=login&&(login.addEventListener("click",handlerFormHeaderClickLogin),login_form.addEventListener("click",handlerFormHeaderClickLogin),registration.addEventListener("click",handlerFormHeaderClickRegistration),registration_form.addEventListener("click",handlerFormHeaderClickRegistration));var handlerFormHeaderClickClose=function(e){form_header.classList.remove("form-header--show"),overlay_show.classList.remove("overlay--show")};null!=close_form&&close_form.addEventListener("click",handlerFormHeaderClickClose);var handlerClickOverlayClose=function(e){overlay_show.classList.remove("overlay--show"),sorting_wrapper.classList.remove("products__sorting-wrapper--active"),form_header.classList.remove("form-header--show");var s=document.querySelector(".prices__submit--disable"),t=document.querySelector(".prices__list--show");null!=t&&t.classList.remove("prices__list--show"),null!=s&&s.classList.remove("prices__submit--disable")},handlerChangeVievOnLine=function(e){var s=e.target;s.checked&&"line"==s.id&&products__all_wrapper.classList.add("products__all-wrapper--line"),s.checked&&"squera"==s.id&&products__all_wrapper.classList.remove("products__all-wrapper--line")};null!=view_product&&view_product.addEventListener("input",handlerChangeVievOnLine);var handlerClickCopy=function(){copy_input.select(),document.execCommand("copy")};null!=copy_btn&&copy_btn.addEventListener("click",handlerClickCopy);var handlerCheck=function(e){!0===e.target.checked?(document_input.disabled=!1,high_price.disabled=!1):(document_input.disabled=!0,high_price.disabled=!0)};null!=dogovor_check&&dogovor_check.addEventListener("change",handlerCheck);var handlerCheckDescription=function(e){var s=e.target;s.classList.contains("add-advert__icon")&&(s.classList.toggle("fa-minus"),s.classList.toggle("fa-plus"))};null!=add_advert_list&&add_advert_list.addEventListener("click",handlerCheckDescription);var handlerRadioChange=function(e){var s=e.target;if("INPUT"===s.nodeName&&s.classList.contains("account__radio-input")){var t=s.id;document.querySelector(".account__params-show").classList.remove("account__params-show"),document.querySelector(".account__"+t).classList.add("account__params-show")}};null!=account__radio_list&&account__radio_list.addEventListener("input",handlerRadioChange);var countAddress=1,handlerClickAddAddress=function(e){var s=e.target;if("LABEL"===s.nodeName||"I"===s.nodeName||s.classList.contains("profile-page__params-icons")){var t=document.querySelector(".params-created__list-address"),r=document.createElement("label");r.classList.add("profile-page__params-label"),r.for="address"+countAddress,r.innerText="Дополнительный адресс № "+countAddress;var a=document.createElement("input");a.classList.add("profile-page__params-input"),a.id="address"+countAddress,a.type="text",a.required=!0,a.placeholder="Укажите ваш дополнительный адрес нахождения",a.name="address"+countAddress,t.append(r,a),countAddress++}};function show_hide_password(e){var s=e.parentElement.querySelector(".profile-page__params-input"),t=e.querySelector(".fas");return"password"==s.getAttribute("type")?(t.classList.remove("fa-eye-slash"),t.classList.add("fa-eye"),s.setAttribute("type","text")):(t.classList.add("fa-eye-slash"),t.classList.remove("fa-eye"),s.setAttribute("type","password")),!1}null!=add_address_additional&&add_address_additional.addEventListener("click",handlerClickAddAddress);var handlerFileLoad=function(e){};null!=file_profile&&file_profile.addEventListener("input",handlerFileLoad);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJvdmVybGF5X3Nob3ciLCJhY2NvdW50X19yYWRpb19saXN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkX2FkZHJlc3NfYWRkaXRpb25hbCIsImNvcHlfYnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJmaWxlX3Byb2ZpbGUiLCJhZGRfYWR2ZXJ0X2xpc3QiLCJjb3B5X2lucHV0IiwiZG9jdW1lbnRfaW5wdXQiLCJoaWdoX3ByaWNlIiwicHJpY2VzX193cmFwIiwib3ZlcmxheSIsInZpZXdfcHJvZHVjdCIsImRvZ292b3JfY2hlY2siLCJzb3J0aW5nX2Zvcm0iLCJzb3J0aW5nX3dyYXBwZXIiLCJwcm9kdWN0c19fYWxsX3dyYXBwZXIiLCJmb3JtX2hlYWRlciIsImxvZ2luIiwibG9naW5fZm9ybSIsInJlZ2lzdHJhdGlvbiIsInJlZ2lzdHJhdGlvbl9mb3JtIiwiY2xvc2VfZm9ybSIsImNhcHRjaGFfdGVzdCIsImhhbmRsZXJDbGlja01vbmV5IiwiZSIsIml0ZW0iLCJ0YXJnZXQiLCJub2RlTmFtZSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicGFyZW50RWxlbWVudCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVyQ2xpY2tPdmVybGF5Q2xvc2UiLCJwcmljZV9saXN0IiwicmVtb3ZlIiwibGlzdF9zdWJtaXRfaWNvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpIiwibGVuZ3RoIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJoYW5kbGVyQ2xpY2tTb3J0aW5nRm9ybSIsInRvZ2dsZSIsImhhbmRsZXJDbGlja1NvcnRpbmdXcmFwcGVyIiwiaGFuZGxlclRhYnNDbGlja1Byb2R1Y3RzIiwicGFyZW50SXRlbSIsImRhdGFzZXQiLCJpZCIsImhhbmRsZXJGb3JtSGVhZGVyQ2xpY2tMb2dpbiIsInByZXZlbnREZWZhdWx0IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJzY2FsZSIsInRvRml4ZWQiLCJzdHlsZSIsInRyYW5zZm9ybSIsInRyYW5zZm9ybU9yaWdpbiIsImhhbmRsZXJGb3JtSGVhZGVyQ2xpY2tSZWdpc3RyYXRpb24iLCJoYW5kbGVyRm9ybUhlYWRlckNsaWNrQ2xvc2UiLCJwcmljZXNfX3N1Ym1pdCIsImhhbmRsZXJDaGFuZ2VWaWV2T25MaW5lIiwiY2hlY2tlZCIsImhhbmRsZXJDbGlja0NvcHkiLCJzZWxlY3QiLCJleGVjQ29tbWFuZCIsImhhbmRsZXJDaGVjayIsImRpc2FibGVkIiwiaGFuZGxlckNoZWNrRGVzY3JpcHRpb24iLCJoYW5kbGVyUmFkaW9DaGFuZ2UiLCJjb3VudEFkZHJlc3MiLCJoYW5kbGVyQ2xpY2tBZGRBZGRyZXNzIiwibGlzdF9hZGRyZXNzIiwibGFiZWwiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJUZXh0IiwiaW5wdXQiLCJ0eXBlIiwicmVxdWlyZWQiLCJwbGFjZWhvbGRlciIsIm5hbWUiLCJhcHBlbmQiLCJzaG93X2hpZGVfcGFzc3dvcmQiLCJmYXMiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJoYW5kbGVyRmlsZUxvYWQiXSwibWFwcGluZ3MiOiJBQUFBLGFBQ0EsSUFVSUEsYUFWQUMsb0JBQXNCQyxTQUFTQyxjQUFjLHdCQUM3Q0MsdUJBQXlCRixTQUFTQyxjQUFjLHVDQUNoREUsU0FBV0gsU0FBU0ksZUFBZSxZQUNuQ0MsYUFBZUwsU0FBU0ksZUFBZSxnQkFDdkNFLGdCQUFrQk4sU0FBU0MsY0FBYyxxQkFDekNNLFdBQWFQLFNBQVNJLGVBQWUsU0FDckNJLGVBQWlCUixTQUFTSSxlQUFlLGtCQUN6Q0ssV0FBYVQsU0FBU0ksZUFBZSxjQUNyQ00sYUFBZVYsU0FBU0MsY0FBYyxpQkFDdENVLFFBQVVYLFNBQVNDLGNBQWMsWUFFakNXLGFBQWVaLFNBQVNDLGNBQWMsdUJBQ3RDWSxjQUFnQmIsU0FBU0MsY0FBYyxrQkFFdkNhLGFBQWVkLFNBQVNDLGNBQWMsaUJBQ3RDYyxnQkFBa0JmLFNBQVNDLGNBQWMsOEJBQ3pDZSxzQkFBd0JoQixTQUFTQyxjQUFjLDBCQUMvQ2dCLFlBQWNqQixTQUFTQyxjQUFjLGdCQUNyQ2lCLE1BQVFsQixTQUFTQyxjQUFjLDRCQUMvQmtCLFdBQWFuQixTQUFTQyxjQUFjLDJCQUNwQ21CLGFBQWVwQixTQUFTQyxjQUFjLG1DQUN0Q29CLGtCQUFvQnJCLFNBQVNDLGNBQWMsa0NBQzNDcUIsV0FBYXRCLFNBQVNDLGNBQWMsNkJBQ3BDc0IsYUFBZXZCLFNBQVNDLGNBQWMseUJBQ3BDdUIsa0JBQW9CLFNBQTJCQyxHQUNqRCxJQUFJQyxFQUFPRCxFQUFFRSxPQUViLEdBQXVCLE1BQWxCRCxFQUFLRSxVQUFvQkYsRUFBS0csVUFBVUMsU0FBUyxpQkFBbUJKLEVBQUtLLGNBQWNGLFVBQVVDLFNBQVMsbUJBQ3hGLFdBQWxCSixFQUFLRSxVQUF5QkYsRUFBS0csVUFBVUMsU0FBUyxtQkFDdkQsR0FBc0IsV0FBbEJKLEVBQUtFLFVBQXlCRixFQUFLRyxVQUFVQyxTQUFTLGtCQUN0REosRUFBS0csVUFBVUcsSUFBSSwyQkFDQU4sRUFBS0ssY0FDTTlCLGNBQWMsaUJBQ2pDNEIsVUFBVUcsSUFBSSxzQkFDekJyQixRQUFRa0IsVUFBVUcsSUFBSSxpQkFFRixPQURwQmxDLGFBQWVFLFNBQVNDLGNBQWMsb0JBRWxDSCxhQUFhbUMsaUJBQWlCLFFBQVNDLCtCQUV4QyxHQUFzQixNQUFsQlIsRUFBS0UsVUFBb0JGLEVBQUtHLFVBQVVDLFNBQVMsZ0JBQWlCLENBQ3pFSixFQUFLSyxjQUFjRixVQUFVRyxJQUFJLDJCQUNkTixFQUFLSyxjQUFjQSxjQUNSOUIsY0FBYyxpQkFDakM0QixVQUFVRyxJQUFJLHNCQUN6QnJCLFFBQVFrQixVQUFVRyxJQUFJLGlCQUVGLE9BRHBCbEMsYUFBZUUsU0FBU0MsY0FBYyxvQkFFbENILGFBQWFtQyxpQkFBaUIsUUFBU0MsZ0NBSTVDLEdBQXVCLE1BQWxCUixFQUFLRSxVQUFvQkYsRUFBS0csVUFBVUMsU0FBUyxpQkFBbUJKLEVBQUtLLGNBQWNGLFVBQVVDLFNBQVMsaUJBQy9GLE9BQWxCSixFQUFLRSxVQUFxQkYsRUFBS0csVUFBVUMsU0FBUyxnQkFDbkQsR0FBdUIsTUFBbEJKLEVBQUtFLFVBQW9CRixFQUFLRyxVQUFVQyxTQUFTLGlCQUFtQkosRUFBS0ssY0FBY0YsVUFBVUMsU0FBUyxnQkFBa0IsQ0FDN0gsSUFBSUssRUFBYVQsRUFBS0ssY0FBY0EsY0FDakJJLEVBQVdKLGNBQ0k5QixjQUFjLG1CQUNqQzRCLFVBQVVPLE9BQU8sMkJBQ2hDRCxFQUFXTixVQUFVTyxPQUFPLHNCQUU1QixJQURBLElBQUlDLEVBQW1CM0IsYUFBYTRCLGlCQUFpQixpQ0FDNUNDLEVBQUksRUFBR0EsRUFBSUYsRUFBaUJHLE9BQVFELElBQ3JDRixFQUFpQkUsR0FBR1YsVUFBVUMsU0FBUyxpQkFDdkNPLEVBQWlCRSxHQUFHVixVQUFVTyxPQUFPLGlCQUM5QkMsRUFBaUJFLEdBQUdWLFVBQVVDLFNBQVMsa0JBQzlDTyxFQUFpQkUsR0FBR1YsVUFBVU8sT0FBTyxrQkFDOUJDLEVBQWlCRSxHQUFHVixVQUFVQyxTQUFTLGdCQUM5Q08sRUFBaUJFLEdBQUdWLFVBQVVPLE9BQU8sZ0JBQzlCQyxFQUFpQkUsR0FBR1YsVUFBVUMsU0FBUyxnQkFDOUNPLEVBQWlCRSxHQUFHVixVQUFVTyxPQUFPLGVBR3JDVixFQUFLRyxVQUFVQyxTQUFTLGlCQUN4Qk8sRUFBaUJFLEdBQUdWLFVBQVVHLElBQUksaUJBQzNCTixFQUFLRyxVQUFVQyxTQUFTLGtCQUMvQk8sRUFBaUJFLEdBQUdWLFVBQVVHLElBQUksa0JBQzNCTixFQUFLRyxVQUFVQyxTQUFTLGdCQUMvQk8sRUFBaUJFLEdBQUdWLFVBQVVHLElBQUksZ0JBQzNCTixFQUFLRyxVQUFVQyxTQUFTLGdCQUMvQk8sRUFBaUJFLEdBQUdWLFVBQVVHLElBQUksZUFHMUNsQyxhQUFhK0IsVUFBVU8sT0FBTyxzQkFDM0IsR0FBc0IsT0FBbEJWLEVBQUtFLFVBQXFCRixFQUFLRyxVQUFVQyxTQUFTLGdCQUFpQixDQUUxRSxJQURBLElBQUlPLEVBQW1CM0IsYUFBYTRCLGlCQUFpQixpQ0FDNUNDLEVBQUksRUFBR0EsRUFBSUYsRUFBaUJHLE9BQVFELElBQ3JDRixFQUFpQkUsR0FBR1YsVUFBVUMsU0FBUyxpQkFDdkNPLEVBQWlCRSxHQUFHVixVQUFVTyxPQUFPLGlCQUM5QkMsRUFBaUJFLEdBQUdWLFVBQVVDLFNBQVMsa0JBQzlDTyxFQUFpQkUsR0FBR1YsVUFBVU8sT0FBTyxrQkFDOUJDLEVBQWlCRSxHQUFHVixVQUFVQyxTQUFTLGdCQUM5Q08sRUFBaUJFLEdBQUdWLFVBQVVPLE9BQU8sZ0JBQzlCQyxFQUFpQkUsR0FBR1YsVUFBVUMsU0FBUyxnQkFDOUNPLEVBQWlCRSxHQUFHVixVQUFVTyxPQUFPLGVBR3JDVixFQUFLZSxrQkFBa0JaLFVBQVVDLFNBQVMsaUJBQzFDTyxFQUFpQkUsR0FBR1YsVUFBVUcsSUFBSSxpQkFDM0JOLEVBQUtlLGtCQUFrQlosVUFBVUMsU0FBUyxrQkFDakRPLEVBQWlCRSxHQUFHVixVQUFVRyxJQUFJLGtCQUMzQk4sRUFBS2Usa0JBQWtCWixVQUFVQyxTQUFTLGdCQUNqRE8sRUFBaUJFLEdBQUdWLFVBQVVHLElBQUksZ0JBQzNCTixFQUFLZSxrQkFBa0JaLFVBQVVDLFNBQVMsZ0JBQ2pETyxFQUFpQkUsR0FBR1YsVUFBVUcsSUFBSSxlQUcxQyxJQUFJRyxFQUFhVCxFQUFLSyxjQUNISSxFQUFXSixjQUNJOUIsY0FBYyxtQkFDakM0QixVQUFVTyxPQUFPLDJCQUNoQ0QsRUFBV04sVUFBVU8sT0FBTyxzQkFDNUJ0QyxhQUFhK0IsVUFBVU8sT0FBTyxtQkFJdEIsTUFBaEIxQixjQUNBQSxhQUFhdUIsaUJBQWlCLFFBQVNULG1CQUUzQyxJQUFJa0Isd0JBQTBCLFNBQWlDakIsR0FDM0RWLGdCQUFnQmMsVUFBVWMsT0FBTyxxQ0FDakNoQyxRQUFRa0IsVUFBVWMsT0FBTyxrQkFDekI3QyxhQUFlRSxTQUFTQyxjQUFjLG1CQUN6QmdDLGlCQUFpQixRQUFTQywyQkFFdkIsTUFBaEJwQixjQUNBQSxhQUFhbUIsaUJBQWlCLFFBQVNTLHlCQUUzQyxJQUFJRSwyQkFBNkIsU0FBb0NuQixHQUNqRSxJQUFJQyxFQUFPRCxFQUFFRSxPQUNTLFVBQWxCRCxFQUFLRSxVQUEwQyxRQUFsQkYsRUFBS0UsVUFBd0MsUUFBbEJGLEVBQUtFLFdBQzdEYixnQkFBZ0JjLFVBQVVPLE9BQU8scUNBQ2pDekIsUUFBUWtCLFVBQVVPLE9BQU8sbUJBR1YsTUFBbkJyQixpQkFDQUEsZ0JBQWdCa0IsaUJBQWlCLFFBQVNXLDRCQUc5QyxJQUFJQyx5QkFBMkIsU0FBa0NwQixHQUM3RCxJQUFJQyxFQUFPRCxFQUFFRSxPQUNiLEdBQXNCLE1BQWxCRCxFQUFLRSxVQUFvQkYsRUFBS0csVUFBVUMsU0FBUyxzQkFBdUIsQ0FDeEUsSUFBSWdCLEVBQWFwQixFQUFLSyxjQUFjQSxjQUFjQSxjQUN6Q2UsRUFBV0MsUUFBUUMsR0FDNUJGLEVBQVc3QyxjQUFjLHdCQUF3QjRCLFVBQVVHLElBQUksNkJBQy9EYyxFQUFXN0MsY0FBYywwQkFBMEI0QixVQUFVRyxJQUFJLG1DQUNqRWMsRUFBVzdDLGNBQWMsaUNBQWlDNEIsVUFBVUcsSUFBSSwwQ0FDeEVjLEVBQVc3QyxjQUFjLDJDQUEyQzRCLFVBQVVHLElBQUksb0RBRWxGYyxFQUFXN0MsY0FBYyx1QkFBdUI0QixVQUFVTyxPQUFPLDRCQUNqRVUsRUFBVzdDLGNBQWMsdUJBQXVCNEIsVUFBVU8sT0FBTyw0QkFDakVVLEVBQVc3QyxjQUFjLHlCQUF5QjRCLFVBQVVPLE9BQU8sOEJBQ25FVSxFQUFXN0MsY0FBYyx5QkFBeUI0QixVQUFVTyxPQUFPLDhCQUduRVUsRUFBVzdDLGNBQWMsa0NBQWtDNEIsVUFBVU8sT0FBTyx3Q0FDNUVVLEVBQVc3QyxjQUFjLDZCQUE2QjRCLFVBQVVPLE9BQU8sbUNBQ3ZFVSxFQUFXN0MsY0FBYyxnQ0FBZ0M0QixVQUFVTyxPQUFPLHNDQUMxRVUsRUFBVzdDLGNBQWMsNEJBQTRCNEIsVUFBVU8sT0FBTyxrQ0FFbEVWLEVBQUtHLFVBQVVDLFNBQVMsa0NBQ3hCZ0IsRUFBVzdDLGNBQWMsdUJBQXVCNEIsVUFBVUcsSUFBSSw0QkFDOUROLEVBQUtHLFVBQVVHLElBQUkseUNBQ1pOLEVBQUtHLFVBQVVDLFNBQVMsNkJBQy9CZ0IsRUFBVzdDLGNBQWMsdUJBQXVCNEIsVUFBVUcsSUFBSSw0QkFDOUROLEVBQUtHLFVBQVVHLElBQUksb0NBQ1pOLEVBQUtHLFVBQVVDLFNBQVMsZ0NBQy9CZ0IsRUFBVzdDLGNBQWMseUJBQXlCNEIsVUFBVUcsSUFBSSw4QkFDaEVOLEVBQUtHLFVBQVVHLElBQUksdUNBQ1pOLEVBQUtHLFVBQVVDLFNBQVMsNkJBQy9CZ0IsRUFBVzdDLGNBQWMseUJBQXlCNEIsVUFBVUcsSUFBSSw4QkFDaEVOLEVBQUtHLFVBQVVHLElBQUkscUNBS0YsTUFBekJoQix1QkFDQUEsc0JBQXNCaUIsaUJBQWlCLFFBQVNZLDBCQUVwRCxJQUFJSSw0QkFBOEIsU0FBcUN4QixHQUNuRUEsRUFBRXlCLGlCQUNTekIsRUFBRUUsT0FLYixHQUpBVixZQUFZWSxVQUFVRyxJQUFJLHFCQUVMaEMsU0FBU21ELGdCQUFnQkMsWUFFekIsS0FBTSxDQUNULEdBQ2QsSUFDSUMsSUFEYXBDLFlBQVltQyxZQURmLElBRVksS0FBS0UsUUFBUSxHQUN2Qy9CLGFBQWFnQyxNQUFNQyxVQUFZLFNBQVdILEVBQVEsSUFDbEQ5QixhQUFhZ0MsTUFBTUUsZ0JBQWtCLFdBRXpDOUMsUUFBUWtCLFVBQVVHLElBQUksaUJBRUYsT0FEcEJsQyxhQUFlRSxTQUFTQyxjQUFjLG9CQUVsQ0gsYUFBYW1DLGlCQUFpQixRQUFTQywwQkFHM0NiLGtCQUFrQlEsVUFBVU8sT0FBTyw0QkFFbkNwQyxTQUFTSSxlQUFlLFNBQVN5QixVQUFVTyxPQUFPLDZCQUNsRHBDLFNBQVNJLGVBQWUsa0JBQWtCeUIsVUFBVU8sT0FBTyw2QkFDM0RwQyxTQUFTSSxlQUFlLGFBQWF5QixVQUFVTyxPQUFPLDZCQUN0RHBDLFNBQVNDLGNBQWMscUNBQXFDNEIsVUFBVU8sT0FBTywrQkFHN0VqQixXQUFXVSxVQUFVRyxJQUFJLDRCQUN6QmhDLFNBQVNJLGVBQWUsWUFBWXlCLFVBQVVHLElBQUksNkJBQ2xEaEMsU0FBU0ksZUFBZSxZQUFZeUIsVUFBVUcsSUFBSSw2QkFDbERoQyxTQUFTQyxjQUFjLGtDQUFrQzRCLFVBQVVHLElBQUksdUNBQ3ZFaEMsU0FBU0MsY0FBYyx5QkFBeUI0QixVQUFVRyxJQUFJLDhCQUM5RGhDLFNBQVNDLGNBQWMsOEJBQThCNEIsVUFBVUcsSUFBSSxnQ0FFbkUwQixtQ0FBcUMsU0FBNENqQyxHQUNqRkEsRUFBRXlCLGlCQUNTekIsRUFBRUUsT0FLYixHQUpBVixZQUFZWSxVQUFVRyxJQUFJLHFCQUNMaEMsU0FBU21ELGdCQUFnQkMsWUFHekIsS0FBTSxDQUNULEdBQ2QsSUFDSUMsSUFEYXBDLFlBQVltQyxZQURmLElBRVksS0FBS0UsUUFBUSxHQUN2Qy9CLGFBQWFnQyxNQUFNQyxVQUFZLFNBQVdILEVBQVEsSUFDbEQ5QixhQUFhZ0MsTUFBTUUsZ0JBQWtCLFdBRXpDOUMsUUFBUWtCLFVBQVVHLElBQUksaUJBRUYsT0FEcEJsQyxhQUFlRSxTQUFTQyxjQUFjLG9CQUVsQ0gsYUFBYW1DLGlCQUFpQixRQUFTQywwQkFFM0NmLFdBQVdVLFVBQVVPLE9BQU8sNEJBQzVCcEMsU0FBU0MsY0FBYyxrQ0FBa0M0QixVQUFVTyxPQUFPLHVDQUMxRXBDLFNBQVNDLGNBQWMseUJBQXlCNEIsVUFBVU8sT0FBTyw4QkFDakVwQyxTQUFTQyxjQUFjLDhCQUE4QjRCLFVBQVVPLE9BQU8sK0JBRXRFZixrQkFBa0JRLFVBQVVHLElBQUksNEJBQ2hDaEMsU0FBU0ksZUFBZSxZQUFZeUIsVUFBVUcsSUFBSSw2QkFDbERoQyxTQUFTSSxlQUFlLFNBQVN5QixVQUFVRyxJQUFJLDZCQUMvQ2hDLFNBQVNJLGVBQWUsWUFBWXlCLFVBQVVHLElBQUksNkJBQ2xEaEMsU0FBU0ksZUFBZSxrQkFBa0J5QixVQUFVRyxJQUFJLDZCQUN4RGhDLFNBQVNJLGVBQWUsYUFBYXlCLFVBQVVHLElBQUksNkJBQ25EaEMsU0FBU0MsY0FBYyxxQ0FBcUM0QixVQUFVRyxJQUFJLGdDQUVqRSxNQUFUZCxRQUNBQSxNQUFNZSxpQkFBaUIsUUFBU2dCLDZCQUNoQzlCLFdBQVdjLGlCQUFpQixRQUFTZ0IsNkJBQ3JDN0IsYUFBYWEsaUJBQWlCLFFBQVN5QixvQ0FDdkNyQyxrQkFBa0JZLGlCQUFpQixRQUFTeUIscUNBSWhELElBQUlDLDRCQUE4QixTQUFxQ2xDLEdBQ25FUixZQUFZWSxVQUFVTyxPQUFPLHFCQUM3QnRDLGFBQWErQixVQUFVTyxPQUFPLGtCQUVoQixNQUFkZCxZQUNBQSxXQUFXVyxpQkFBaUIsUUFBUzBCLDZCQUV6QyxJQUFJekIseUJBQTJCLFNBQWtDVCxHQUM3RDNCLGFBQWErQixVQUFVTyxPQUFPLGlCQUM5QnJCLGdCQUFnQmMsVUFBVU8sT0FBTyxxQ0FDakNuQixZQUFZWSxVQUFVTyxPQUFPLHFCQUM3QixJQUFJd0IsRUFBaUI1RCxTQUFTQyxjQUFjLDRCQUN4Q2tDLEVBQWFuQyxTQUFTQyxjQUFjLHVCQUN0QixNQUFka0MsR0FDQUEsRUFBV04sVUFBVU8sT0FBTyxzQkFFVixNQUFsQndCLEdBQ0FBLEVBQWUvQixVQUFVTyxPQUFPLDRCQUlwQ3lCLHdCQUEwQixTQUFpQ3BDLEdBRTNELElBQUlDLEVBQU9ELEVBQUVFLE9BQ1RELEVBQUtvQyxTQUFzQixRQUFYcEMsRUFBS3NCLElBQ3JCaEMsc0JBQXNCYSxVQUFVRyxJQUFJLCtCQUVwQ04sRUFBS29DLFNBQXNCLFVBQVhwQyxFQUFLc0IsSUFDckJoQyxzQkFBc0JhLFVBQVVPLE9BQU8sZ0NBRzNCLE1BQWhCeEIsY0FDQUEsYUFBYXFCLGlCQUFpQixRQUFTNEIseUJBRzNDLElBQUlFLGlCQUFtQixXQUNuQnhELFdBQVd5RCxTQUNYaEUsU0FBU2lFLFlBQVksU0FFVCxNQUFaOUQsVUFDQUEsU0FBUzhCLGlCQUFpQixRQUFTOEIsa0JBR3ZDLElBQUlHLGFBQWUsU0FBc0J6QyxJQUNaLElBQXJCQSxFQUFFRSxPQUFPbUMsU0FDVHRELGVBQWUyRCxVQUFXLEVBQzFCMUQsV0FBVzBELFVBQVcsSUFFdEIzRCxlQUFlMkQsVUFBVyxFQUMxQjFELFdBQVcwRCxVQUFXLElBR1QsTUFBakJ0RCxlQUNBQSxjQUFjb0IsaUJBQWlCLFNBQVVpQyxjQUU3QyxJQUFJRSx3QkFBMEIsU0FBaUMzQyxHQUMzRCxJQUFJQyxFQUFPRCxFQUFFRSxPQUNURCxFQUFLRyxVQUFVQyxTQUFTLHNCQUN4QkosRUFBS0csVUFBVWMsT0FBTyxZQUN0QmpCLEVBQUtHLFVBQVVjLE9BQU8sYUFHUCxNQUFuQnJDLGlCQUNBQSxnQkFBZ0IyQixpQkFBaUIsUUFBU21DLHlCQUU5QyxJQUFJQyxtQkFBcUIsU0FBNEI1QyxHQUNqRCxJQUFJQyxFQUFPRCxFQUFFRSxPQUNiLEdBQXNCLFVBQWxCRCxFQUFLRSxVQUF3QkYsRUFBS0csVUFBVUMsU0FBUyx3QkFBeUIsQ0FDOUUsSUFBSWtCLEVBQUt0QixFQUFLc0IsR0FDZGhELFNBQVNDLGNBQWMseUJBQXlCNEIsVUFBVU8sT0FBTyx3QkFDakVwQyxTQUFTQyxjQUFjLGFBQWUrQyxHQUFJbkIsVUFBVUcsSUFBSSwwQkFHckMsTUFBdkJqQyxxQkFDQUEsb0JBQW9Ca0MsaUJBQWlCLFFBQVNvQyxvQkFFbEQsSUFBSUMsYUFBZSxFQUNmQyx1QkFBeUIsU0FBZ0M5QyxHQUN6RCxJQUFJQyxFQUFPRCxFQUFFRSxPQUNiLEdBQXVCLFVBQWxCRCxFQUFLRSxVQUEwQyxNQUFsQkYsRUFBS0UsVUFBcUJGLEVBQUtHLFVBQVVDLFNBQVMsOEJBQStCLENBQy9HLElBQUkwQyxFQUFleEUsU0FBU0MsY0FBYyxpQ0FDdEN3RSxFQUFRekUsU0FBUzBFLGNBQWMsU0FDbkNELEVBQU01QyxVQUFVRyxJQUFJLDhCQUNwQnlDLEVBQUssSUFBTyxVQUFZSCxhQUN4QkcsRUFBTUUsVUFBWSwyQkFBNkJMLGFBQy9DLElBQUlNLEVBQVE1RSxTQUFTMEUsY0FBYyxTQUNuQ0UsRUFBTS9DLFVBQVVHLElBQUksOEJBQ3BCNEMsRUFBTTVCLEdBQUssVUFBWXNCLGFBQ3ZCTSxFQUFNQyxLQUFPLE9BQ2JELEVBQU1FLFVBQVcsRUFDakJGLEVBQU1HLFlBQWMsOENBQ3BCSCxFQUFNSSxLQUFPLFVBQVlWLGFBQ3pCRSxFQUFhUyxPQUFPUixFQUFPRyxHQUMzQk4saUJBT1IsU0FBU1ksbUJBQW1CdkQsR0FDeEIsSUFBSWlELEVBQVFqRCxFQUFPSSxjQUFjOUIsY0FBYywrQkFDM0NrRixFQUFNeEQsRUFBTzFCLGNBQWMsUUFVL0IsTUFUa0MsWUFBOUIyRSxFQUFNUSxhQUFhLFNBQ25CRCxFQUFJdEQsVUFBVU8sT0FBTyxnQkFDckIrQyxFQUFJdEQsVUFBVUcsSUFBSSxVQUNsQjRDLEVBQU1TLGFBQWEsT0FBUSxVQUUzQkYsRUFBSXRELFVBQVVHLElBQUksZ0JBQ2xCbUQsRUFBSXRELFVBQVVPLE9BQU8sVUFDckJ3QyxFQUFNUyxhQUFhLE9BQVEsY0FFeEIsRUFoQm1CLE1BQTFCbkYsd0JBQ0FBLHVCQUF1QitCLGlCQUFpQixRQUFTc0Msd0JBa0JyRCxJQUFJZSxnQkFBa0IsU0FBMEI3RCxLQUc1QixNQUFoQnBCLGNBQ0FBLGFBQWE0QixpQkFBaUIsUUFBU3FEIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbmxldCBhY2NvdW50X19yYWRpb19saXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2NvdW50X19yYWRpby1saXN0XCIpO1xyXG5sZXQgYWRkX2FkZHJlc3NfYWRkaXRpb25hbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZS1wYWdlX19wYXJhbXMtbGFiZWwtYWRkcmVzc1wiKTtcclxubGV0IGNvcHlfYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG4tY29weVwiKTtcclxubGV0IGZpbGVfcHJvZmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlsZS1wcm9maWxlXCIpO1xyXG5sZXQgYWRkX2FkdmVydF9saXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtYWR2ZXJ0X19saXN0XCIpO1xyXG5sZXQgY29weV9pbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVmZXJcIik7XHJcbmxldCBkb2N1bWVudF9pbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZG9jdW1lbnRfaW5wdXRcIik7XHJcbmxldCBoaWdoX3ByaWNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoaWdoLXByaWNlXCIpO1xyXG5sZXQgcHJpY2VzX193cmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcmljZXNfX3dyYXBcIik7XHJcbmxldCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpO1xyXG5sZXQgb3ZlcmxheV9zaG93O1xyXG5sZXQgdmlld19wcm9kdWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zb3J0aW5nX19saXN0LXZpZXdcIik7XHJcbmxldCBkb2dvdm9yX2NoZWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkb2dvdm9yX2NoZWNrXCIpO1xyXG5cclxubGV0IHNvcnRpbmdfZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc29ydGluZy1mb3JtXCIpO1xyXG5sZXQgc29ydGluZ193cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9kdWN0c19fc29ydGluZy13cmFwcGVyXCIpO1xyXG5sZXQgcHJvZHVjdHNfX2FsbF93cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9kdWN0c19fYWxsLXdyYXBwZXJcIik7XHJcbmxldCBmb3JtX2hlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1oZWFkZXJcIik7XHJcbmxldCBsb2dpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZWFkZXJfX2J0bi0tbG9naW5cIik7XHJcbmxldCBsb2dpbl9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWhlYWRlcl9fYnRuLWxvZ2luXCIpO1xyXG5sZXQgcmVnaXN0cmF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhlYWRlcl9fYnRuLS1yZWdpc3RyYXRpb25cIik7XHJcbmxldCByZWdpc3RyYXRpb25fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1oZWFkZXJfX2J0bi1yZWdpc3RyYXRpb25cIik7XHJcbmxldCBjbG9zZV9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWhlYWRlcl9faWNvbi0tY2xvc2VcIik7XHJcbmxldCBjYXB0Y2hhX3Rlc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm0taGVhZGVyX19jYXB0Y2hhXCIpO1xyXG5jb25zdCBoYW5kbGVyQ2xpY2tNb25leSA9IGZ1bmN0aW9uIGhhbmRsZXJDbGlja01vbmV5KGUpIHtcclxuICAgIGxldCBpdGVtID0gZS50YXJnZXQ7XHJcblxyXG4gICAgaWYgKChpdGVtLm5vZGVOYW1lID09PSBcIklcIiAmJiBpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcInByaWNlc19faWNvblwiKSAmJiBpdGVtLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJpY2VzX19zdWJtaXRcIikpIHx8XHJcbiAgICAgICAgKGl0ZW0ubm9kZU5hbWUgPT09IFwiQlVUVE9OXCIgJiYgaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJwcmljZXNfX3N1Ym1pdFwiKSkpIHtcclxuICAgICAgICBpZiAoaXRlbS5ub2RlTmFtZSA9PT0gXCJCVVRUT05cIiAmJiBpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcInByaWNlc19fc3VibWl0XCIpKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcInByaWNlc19fc3VibWl0LS1kaXNhYmxlXCIpO1xyXG4gICAgICAgICAgICBsZXQgcGFyZW50X3JhbmdlID0gaXRlbS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgcHJpY2VfbGlzdCA9IHBhcmVudF9yYW5nZS5xdWVyeVNlbGVjdG9yKFwiLnByaWNlc19fbGlzdFwiKTtcclxuICAgICAgICAgICAgcHJpY2VfbGlzdC5jbGFzc0xpc3QuYWRkKFwicHJpY2VzX19saXN0LS1zaG93XCIpO1xyXG4gICAgICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJvdmVybGF5LS1zaG93XCIpO1xyXG4gICAgICAgICAgICBvdmVybGF5X3Nob3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXktLXNob3dcIik7XHJcbiAgICAgICAgICAgIGlmIChvdmVybGF5X3Nob3cgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgb3ZlcmxheV9zaG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVyQ2xpY2tPdmVybGF5Q2xvc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLm5vZGVOYW1lID09PSBcIklcIiAmJiBpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcInByaWNlc19faWNvblwiKSkge1xyXG4gICAgICAgICAgICBpdGVtLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInByaWNlc19fc3VibWl0LS1kaXNhYmxlXCIpO1xyXG4gICAgICAgICAgICBsZXQgcGFyZW50X3JhbmdlID0gaXRlbS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGxldCBwcmljZV9saXN0ID0gcGFyZW50X3JhbmdlLnF1ZXJ5U2VsZWN0b3IoXCIucHJpY2VzX19saXN0XCIpO1xyXG4gICAgICAgICAgICBwcmljZV9saXN0LmNsYXNzTGlzdC5hZGQoXCJwcmljZXNfX2xpc3QtLXNob3dcIik7XHJcbiAgICAgICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZChcIm92ZXJsYXktLXNob3dcIik7XHJcbiAgICAgICAgICAgIG92ZXJsYXlfc2hvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheS0tc2hvd1wiKTtcclxuICAgICAgICAgICAgaWYgKG92ZXJsYXlfc2hvdyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBvdmVybGF5X3Nob3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZXJDbGlja092ZXJsYXlDbG9zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfSBlbHNlIGlmICgoaXRlbS5ub2RlTmFtZSA9PT0gXCJJXCIgJiYgaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJwcmljZXNfX2ljb25cIikgJiYgaXRlbS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInByaWNlc19faXRlbVwiKSkgfHxcclxuICAgICAgICAoaXRlbS5ub2RlTmFtZSA9PT0gXCJMSVwiICYmIGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJpY2VzX19pdGVtXCIpKSkge1xyXG4gICAgICAgIGlmICgoaXRlbS5ub2RlTmFtZSA9PT0gXCJJXCIgJiYgaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJwcmljZXNfX2ljb25cIikgJiYgaXRlbS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInByaWNlc19faXRlbVwiKSkpIHtcclxuICAgICAgICAgICAgbGV0IHByaWNlX2xpc3QgPSBpdGVtLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgbGV0IHBhcmVudF9yYW5nZSA9IHByaWNlX2xpc3QucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgbGV0IHByaWNlc19fc3VibWl0ID0gcGFyZW50X3JhbmdlLnF1ZXJ5U2VsZWN0b3IoXCIucHJpY2VzX19zdWJtaXRcIik7XHJcbiAgICAgICAgICAgIHByaWNlc19fc3VibWl0LmNsYXNzTGlzdC5yZW1vdmUoXCJwcmljZXNfX3N1Ym1pdC0tZGlzYWJsZVwiKTtcclxuICAgICAgICAgICAgcHJpY2VfbGlzdC5jbGFzc0xpc3QucmVtb3ZlKFwicHJpY2VzX19saXN0LS1zaG93XCIpO1xyXG4gICAgICAgICAgICBsZXQgbGlzdF9zdWJtaXRfaWNvbiA9IHByaWNlc19fd3JhcC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByaWNlc19fc3VibWl0IC5wcmljZXNfX2ljb25cIik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdF9zdWJtaXRfaWNvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZmEtcnVibGUtc2lnblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LnJlbW92ZShcImZhLXJ1YmxlLXNpZ25cIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZmEtZG9sbGFyLXNpZ25cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0X3N1Ym1pdF9pY29uW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJmYS1kb2xsYXItc2lnblwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdF9zdWJtaXRfaWNvbltpXS5jbGFzc0xpc3QuY29udGFpbnMoXCJmYS1ldXJvLXNpZ25cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0X3N1Ym1pdF9pY29uW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJmYS1ldXJvLXNpZ25cIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZmEteWVuLXNpZ25cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0X3N1Ym1pdF9pY29uW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJmYS15ZW4tc2lnblwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJmYS1ydWJsZS1zaWduXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdF9zdWJtaXRfaWNvbltpXS5jbGFzc0xpc3QuYWRkKFwiZmEtcnVibGUtc2lnblwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJmYS1kb2xsYXItc2lnblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LmFkZChcImZhLWRvbGxhci1zaWduXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcImZhLWV1cm8tc2lnblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LmFkZChcImZhLWV1cm8tc2lnblwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJmYS15ZW4tc2lnblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LmFkZChcImZhLXllbi1zaWduXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG92ZXJsYXlfc2hvdy5jbGFzc0xpc3QucmVtb3ZlKFwib3ZlcmxheS0tc2hvd1wiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0ubm9kZU5hbWUgPT09IFwiTElcIiAmJiBpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcInByaWNlc19faXRlbVwiKSkge1xyXG4gICAgICAgICAgICBsZXQgbGlzdF9zdWJtaXRfaWNvbiA9IHByaWNlc19fd3JhcC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByaWNlc19fc3VibWl0IC5wcmljZXNfX2ljb25cIik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdF9zdWJtaXRfaWNvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZmEtcnVibGUtc2lnblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LnJlbW92ZShcImZhLXJ1YmxlLXNpZ25cIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZmEtZG9sbGFyLXNpZ25cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0X3N1Ym1pdF9pY29uW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJmYS1kb2xsYXItc2lnblwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdF9zdWJtaXRfaWNvbltpXS5jbGFzc0xpc3QuY29udGFpbnMoXCJmYS1ldXJvLXNpZ25cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0X3N1Ym1pdF9pY29uW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJmYS1ldXJvLXNpZ25cIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZmEteWVuLXNpZ25cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0X3N1Ym1pdF9pY29uW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJmYS15ZW4tc2lnblwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoXCJmYS1ydWJsZS1zaWduXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdF9zdWJtaXRfaWNvbltpXS5jbGFzc0xpc3QuYWRkKFwiZmEtcnVibGUtc2lnblwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoXCJmYS1kb2xsYXItc2lnblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LmFkZChcImZhLWRvbGxhci1zaWduXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucyhcImZhLWV1cm8tc2lnblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LmFkZChcImZhLWV1cm8tc2lnblwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoXCJmYS15ZW4tc2lnblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Rfc3VibWl0X2ljb25baV0uY2xhc3NMaXN0LmFkZChcImZhLXllbi1zaWduXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBwcmljZV9saXN0ID0gaXRlbS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgcGFyZW50X3JhbmdlID0gcHJpY2VfbGlzdC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgcHJpY2VzX19zdWJtaXQgPSBwYXJlbnRfcmFuZ2UucXVlcnlTZWxlY3RvcihcIi5wcmljZXNfX3N1Ym1pdFwiKTtcclxuICAgICAgICAgICAgcHJpY2VzX19zdWJtaXQuY2xhc3NMaXN0LnJlbW92ZShcInByaWNlc19fc3VibWl0LS1kaXNhYmxlXCIpO1xyXG4gICAgICAgICAgICBwcmljZV9saXN0LmNsYXNzTGlzdC5yZW1vdmUoXCJwcmljZXNfX2xpc3QtLXNob3dcIik7XHJcbiAgICAgICAgICAgIG92ZXJsYXlfc2hvdy5jbGFzc0xpc3QucmVtb3ZlKFwib3ZlcmxheS0tc2hvd1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbmlmIChwcmljZXNfX3dyYXAgIT0gbnVsbCkge1xyXG4gICAgcHJpY2VzX193cmFwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVyQ2xpY2tNb25leSk7XHJcbn1cclxubGV0IGhhbmRsZXJDbGlja1NvcnRpbmdGb3JtID0gZnVuY3Rpb24gaGFuZGxlckNsaWNrU29ydGluZ0Zvcm0oZSkge1xyXG4gICAgc29ydGluZ193cmFwcGVyLmNsYXNzTGlzdC50b2dnbGUoXCJwcm9kdWN0c19fc29ydGluZy13cmFwcGVyLS1hY3RpdmVcIik7XHJcbiAgICBvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoXCJvdmVybGF5LS1zaG93XCIpO1xyXG4gICAgb3ZlcmxheV9zaG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5LS1zaG93XCIpO1xyXG4gICAgb3ZlcmxheV9zaG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVyQ2xpY2tPdmVybGF5Q2xvc2UpO1xyXG59O1xyXG5pZiAoc29ydGluZ19mb3JtICE9IG51bGwpIHtcclxuICAgIHNvcnRpbmdfZm9ybS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlckNsaWNrU29ydGluZ0Zvcm0pO1xyXG59XHJcbmxldCBoYW5kbGVyQ2xpY2tTb3J0aW5nV3JhcHBlciA9IGZ1bmN0aW9uIGhhbmRsZXJDbGlja1NvcnRpbmdXcmFwcGVyKGUpIHtcclxuICAgIGxldCBpdGVtID0gZS50YXJnZXQ7XHJcbiAgICBpZiAoaXRlbS5ub2RlTmFtZSA9PT0gXCJJTlBVVFwiIHx8IGl0ZW0ubm9kZU5hbWUgPT09IFwic3ZnXCIgfHwgaXRlbS5ub2RlTmFtZSA9PT0gXCJ1c2VcIikge1xyXG4gICAgICAgIHNvcnRpbmdfd3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKFwicHJvZHVjdHNfX3NvcnRpbmctd3JhcHBlci0tYWN0aXZlXCIpO1xyXG4gICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcIm92ZXJsYXktLXNob3dcIik7XHJcbiAgICB9XHJcbn07XHJcbmlmIChzb3J0aW5nX3dyYXBwZXIgIT0gbnVsbCkge1xyXG4gICAgc29ydGluZ193cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVyQ2xpY2tTb3J0aW5nV3JhcHBlcik7XHJcbn1cclxuXHJcbmxldCBoYW5kbGVyVGFic0NsaWNrUHJvZHVjdHMgPSBmdW5jdGlvbiBoYW5kbGVyVGFic0NsaWNrUHJvZHVjdHMoZSkge1xyXG4gICAgbGV0IGl0ZW0gPSBlLnRhcmdldDtcclxuICAgIGlmIChpdGVtLm5vZGVOYW1lID09PSBcIklcIiAmJiBpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcInByb2R1Y3QtaXRlbV9faWNvblwiKSkge1xyXG4gICAgICAgIGxldCBwYXJlbnRJdGVtID0gaXRlbS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICBsZXQgaWQgPSBwYXJlbnRJdGVtLmRhdGFzZXQuaWQ7XHJcbiAgICAgICAgcGFyZW50SXRlbS5xdWVyeVNlbGVjdG9yKFwiLnByb2R1Y3QtaXRlbV9fdGl0bGVcIikuY2xhc3NMaXN0LmFkZChcInByb2R1Y3QtaXRlbV9fdGl0bGUtLXNob3dcIik7XHJcbiAgICAgICAgcGFyZW50SXRlbS5xdWVyeVNlbGVjdG9yKFwiLnByb2R1Y3QtaXRlbV9fd3JhcHBlclwiKS5jbGFzc0xpc3QuYWRkKFwicHJvZHVjdC1pdGVtX193cmFwcGVyLS1kaXNhYmxlZFwiKTtcclxuICAgICAgICBwYXJlbnRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZHVjdC1pdGVtX19kZXNjcmlwdGlvbi1tYlwiKS5jbGFzc0xpc3QuYWRkKFwicHJvZHVjdC1pdGVtX19kZXNjcmlwdGlvbi1tYi0tZGlzYWJsZWRcIik7XHJcbiAgICAgICAgcGFyZW50SXRlbS5xdWVyeVNlbGVjdG9yKFwiLnByb2R1Y3QtaXRlbV9faW5mb3JtYXRpb24tbGluZS13cmFwcGVyXCIpLmNsYXNzTGlzdC5hZGQoXCJwcm9kdWN0LWl0ZW1fX2luZm9ybWF0aW9uLWxpbmUtd3JhcHBlci0tZGlzYWJsZWRcIik7XHJcblxyXG4gICAgICAgIHBhcmVudEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wcm9kdWN0LWl0ZW1fX2luZm9cIikuY2xhc3NMaXN0LnJlbW92ZShcInByb2R1Y3QtaXRlbV9faW5mby0tc2hvd1wiKTtcclxuICAgICAgICBwYXJlbnRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZHVjdC1pdGVtX19zdGFyXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJwcm9kdWN0LWl0ZW1fX3N0YXItLXNob3dcIik7XHJcbiAgICAgICAgcGFyZW50SXRlbS5xdWVyeVNlbGVjdG9yKFwiLnByb2R1Y3QtaXRlbV9fYXV0aG9yXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJwcm9kdWN0LWl0ZW1fX2F1dGhvci0tc2hvd1wiKTtcclxuICAgICAgICBwYXJlbnRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZHVjdC1pdGVtX19iYXNrZXRcIikuY2xhc3NMaXN0LnJlbW92ZShcInByb2R1Y3QtaXRlbV9fYmFza2V0LS1zaG93XCIpO1xyXG5cclxuXHJcbiAgICAgICAgcGFyZW50SXRlbS5xdWVyeVNlbGVjdG9yKFwiLnByb2R1Y3QtaXRlbV9faWNvbi0tYnJpZWZjYXNlXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJwcm9kdWN0LWl0ZW1fX2ljb24tLWJyaWVmY2FzZS1hY3RpdmVcIik7XHJcbiAgICAgICAgcGFyZW50SXRlbS5xdWVyeVNlbGVjdG9yKFwiLnByb2R1Y3QtaXRlbV9faWNvbi0tc3RhclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwicHJvZHVjdC1pdGVtX19pY29uLS1zdGFyLWFjdGl2ZVwiKTtcclxuICAgICAgICBwYXJlbnRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZHVjdC1pdGVtX19pY29uLS1wcm9maWxlXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJwcm9kdWN0LWl0ZW1fX2ljb24tLXByb2ZpbGUtYWN0aXZlXCIpO1xyXG4gICAgICAgIHBhcmVudEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wcm9kdWN0LWl0ZW1fX2ljb24tLWJ1eVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwicHJvZHVjdC1pdGVtX19pY29uLS1idXktYWN0aXZlXCIpO1xyXG5cclxuICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJwcm9kdWN0LWl0ZW1fX2ljb24tLWJyaWVmY2FzZVwiKSkge1xyXG4gICAgICAgICAgICBwYXJlbnRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZHVjdC1pdGVtX19pbmZvXCIpLmNsYXNzTGlzdC5hZGQoXCJwcm9kdWN0LWl0ZW1fX2luZm8tLXNob3dcIik7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcInByb2R1Y3QtaXRlbV9faWNvbi0tYnJpZWZjYXNlLWFjdGl2ZVwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJvZHVjdC1pdGVtX19pY29uLS1zdGFyXCIpKSB7XHJcbiAgICAgICAgICAgIHBhcmVudEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wcm9kdWN0LWl0ZW1fX3N0YXJcIikuY2xhc3NMaXN0LmFkZChcInByb2R1Y3QtaXRlbV9fc3Rhci0tc2hvd1wiKTtcclxuICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwicHJvZHVjdC1pdGVtX19pY29uLS1zdGFyLWFjdGl2ZVwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJvZHVjdC1pdGVtX19pY29uLS1wcm9maWxlXCIpKSB7XHJcbiAgICAgICAgICAgIHBhcmVudEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wcm9kdWN0LWl0ZW1fX2F1dGhvclwiKS5jbGFzc0xpc3QuYWRkKFwicHJvZHVjdC1pdGVtX19hdXRob3ItLXNob3dcIik7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcInByb2R1Y3QtaXRlbV9faWNvbi0tcHJvZmlsZS1hY3RpdmVcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcInByb2R1Y3QtaXRlbV9faWNvbi0tYnV5XCIpKSB7XHJcbiAgICAgICAgICAgIHBhcmVudEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wcm9kdWN0LWl0ZW1fX2Jhc2tldFwiKS5jbGFzc0xpc3QuYWRkKFwicHJvZHVjdC1pdGVtX19iYXNrZXQtLXNob3dcIik7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcInByb2R1Y3QtaXRlbV9faWNvbi0tYnV5LWFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59O1xyXG5pZiAocHJvZHVjdHNfX2FsbF93cmFwcGVyICE9IG51bGwpIHtcclxuICAgIHByb2R1Y3RzX19hbGxfd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlclRhYnNDbGlja1Byb2R1Y3RzKTtcclxufVxyXG5sZXQgaGFuZGxlckZvcm1IZWFkZXJDbGlja0xvZ2luID0gZnVuY3Rpb24gaGFuZGxlckZvcm1IZWFkZXJDbGlja0xvZ2luKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxldCBpdGVtID0gZS50YXJnZXQ7XHJcbiAgICBmb3JtX2hlYWRlci5jbGFzc0xpc3QuYWRkKFwiZm9ybS1oZWFkZXItLXNob3dcIik7XHJcblxyXG4gICAgbGV0IHdpZHRoX2RvY3VtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xyXG4gICAgbGV0IG1pbnVzX3dpZHRoO1xyXG4gICAgaWYgKHdpZHRoX2RvY3VtZW50IDwgMTE3MCkge1xyXG4gICAgICAgIG1pbnVzX3dpZHRoID0gMzA7XHJcbiAgICAgICAgbGV0IHdpZHRoX2Zvcm0gPSBmb3JtX2hlYWRlci5jbGllbnRXaWR0aCAtIG1pbnVzX3dpZHRoO1xyXG4gICAgICAgIGxldCBzY2FsZSA9ICh3aWR0aF9mb3JtIC8gMzA0KS50b0ZpeGVkKDIpO1xyXG4gICAgICAgIGNhcHRjaGFfdGVzdC5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKFwiICsgc2NhbGUgKyBcIilcIjtcclxuICAgICAgICBjYXB0Y2hhX3Rlc3Quc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gXCJsZWZ0IHRvcFwiO1xyXG4gICAgfVxyXG4gICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwib3ZlcmxheS0tc2hvd1wiKTtcclxuICAgIG92ZXJsYXlfc2hvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheS0tc2hvd1wiKTtcclxuICAgIGlmIChvdmVybGF5X3Nob3cgIT0gbnVsbCkge1xyXG4gICAgICAgIG92ZXJsYXlfc2hvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlckNsaWNrT3ZlcmxheUNsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICByZWdpc3RyYXRpb25fZm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybS1oZWFkZXJfX2J0bi0tYWN0aXZlXCIpO1xyXG5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZW1haWxcIikuY2xhc3NMaXN0LnJlbW92ZShcImZvcm0taGVhZGVyX19pbnB1dHMtLXNob3dcIik7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlcGVhdFBhc3N3b3JkXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtLWhlYWRlcl9faW5wdXRzLS1zaG93XCIpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYW1lUmVmZXJcIikuY2xhc3NMaXN0LnJlbW92ZShcImZvcm0taGVhZGVyX19pbnB1dHMtLXNob3dcIik7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0taGVhZGVyX19zdWJtaXQtcmVnaXN0cmF0aW9uXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtLWhlYWRlcl9fc3VibWl0LS1hY3RpdmVcIik7XHJcblxyXG5cclxuICAgIGxvZ2luX2Zvcm0uY2xhc3NMaXN0LmFkZChcImZvcm0taGVhZGVyX19idG4tLWFjdGl2ZVwiKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmlja25hbWVcIikuY2xhc3NMaXN0LmFkZChcImZvcm0taGVhZGVyX19pbnB1dHMtLXNob3dcIik7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3N3b3JkXCIpLmNsYXNzTGlzdC5hZGQoXCJmb3JtLWhlYWRlcl9faW5wdXRzLS1zaG93XCIpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWhlYWRlcl9fYnRuLXdyYXBwZXItaW5mb1wiKS5jbGFzc0xpc3QuYWRkKFwiZm9ybS1oZWFkZXJfX2J0bi13cmFwcGVyLWluZm8tLXNob3dcIik7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0taGVhZGVyX19zb2NpYWxzXCIpLmNsYXNzTGlzdC5hZGQoXCJmb3JtLWhlYWRlcl9fc29jaWFscy0tc2hvd1wiKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1oZWFkZXJfX3N1Ym1pdC1sb2dpblwiKS5jbGFzc0xpc3QuYWRkKFwiZm9ybS1oZWFkZXJfX3N1Ym1pdC0tYWN0aXZlXCIpO1xyXG59O1xyXG5sZXQgaGFuZGxlckZvcm1IZWFkZXJDbGlja1JlZ2lzdHJhdGlvbiA9IGZ1bmN0aW9uIGhhbmRsZXJGb3JtSGVhZGVyQ2xpY2tSZWdpc3RyYXRpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgbGV0IGl0ZW0gPSBlLnRhcmdldDtcclxuICAgIGZvcm1faGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJmb3JtLWhlYWRlci0tc2hvd1wiKTtcclxuICAgIGxldCB3aWR0aF9kb2N1bWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuXHJcbiAgICBsZXQgbWludXNfd2lkdGg7XHJcbiAgICBpZiAod2lkdGhfZG9jdW1lbnQgPCAxMTcwKSB7XHJcbiAgICAgICAgbWludXNfd2lkdGggPSAzMDtcclxuICAgICAgICBsZXQgd2lkdGhfZm9ybSA9IGZvcm1faGVhZGVyLmNsaWVudFdpZHRoIC0gbWludXNfd2lkdGg7XHJcbiAgICAgICAgbGV0IHNjYWxlID0gKHdpZHRoX2Zvcm0gLyAzMDQpLnRvRml4ZWQoMik7XHJcbiAgICAgICAgY2FwdGNoYV90ZXN0LnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUoXCIgKyBzY2FsZSArIFwiKVwiO1xyXG4gICAgICAgIGNhcHRjaGFfdGVzdC5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBcImxlZnQgdG9wXCI7XHJcbiAgICB9XHJcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJvdmVybGF5LS1zaG93XCIpO1xyXG4gICAgb3ZlcmxheV9zaG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5LS1zaG93XCIpO1xyXG4gICAgaWYgKG92ZXJsYXlfc2hvdyAhPSBudWxsKSB7XHJcbiAgICAgICAgb3ZlcmxheV9zaG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVyQ2xpY2tPdmVybGF5Q2xvc2UpO1xyXG4gICAgfVxyXG4gICAgbG9naW5fZm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybS1oZWFkZXJfX2J0bi0tYWN0aXZlXCIpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWhlYWRlcl9fYnRuLXdyYXBwZXItaW5mb1wiKS5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybS1oZWFkZXJfX2J0bi13cmFwcGVyLWluZm8tLXNob3dcIik7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0taGVhZGVyX19zb2NpYWxzXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtLWhlYWRlcl9fc29jaWFscy0tc2hvd1wiKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1oZWFkZXJfX3N1Ym1pdC1sb2dpblwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybS1oZWFkZXJfX3N1Ym1pdC0tYWN0aXZlXCIpO1xyXG5cclxuICAgIHJlZ2lzdHJhdGlvbl9mb3JtLmNsYXNzTGlzdC5hZGQoXCJmb3JtLWhlYWRlcl9fYnRuLS1hY3RpdmVcIik7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5pY2tuYW1lXCIpLmNsYXNzTGlzdC5hZGQoXCJmb3JtLWhlYWRlcl9faW5wdXRzLS1zaG93XCIpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlbWFpbFwiKS5jbGFzc0xpc3QuYWRkKFwiZm9ybS1oZWFkZXJfX2lucHV0cy0tc2hvd1wiKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFzc3dvcmRcIikuY2xhc3NMaXN0LmFkZChcImZvcm0taGVhZGVyX19pbnB1dHMtLXNob3dcIik7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlcGVhdFBhc3N3b3JkXCIpLmNsYXNzTGlzdC5hZGQoXCJmb3JtLWhlYWRlcl9faW5wdXRzLS1zaG93XCIpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYW1lUmVmZXJcIikuY2xhc3NMaXN0LmFkZChcImZvcm0taGVhZGVyX19pbnB1dHMtLXNob3dcIik7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0taGVhZGVyX19zdWJtaXQtcmVnaXN0cmF0aW9uXCIpLmNsYXNzTGlzdC5hZGQoXCJmb3JtLWhlYWRlcl9fc3VibWl0LS1hY3RpdmVcIik7XHJcbn07XHJcbmlmIChsb2dpbiAhPSBudWxsKSB7XHJcbiAgICBsb2dpbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlckZvcm1IZWFkZXJDbGlja0xvZ2luKTtcclxuICAgIGxvZ2luX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZXJGb3JtSGVhZGVyQ2xpY2tMb2dpbik7XHJcbiAgICByZWdpc3RyYXRpb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZXJGb3JtSGVhZGVyQ2xpY2tSZWdpc3RyYXRpb24pO1xyXG4gICAgcmVnaXN0cmF0aW9uX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZXJGb3JtSGVhZGVyQ2xpY2tSZWdpc3RyYXRpb24pO1xyXG59XHJcblxyXG5cclxubGV0IGhhbmRsZXJGb3JtSGVhZGVyQ2xpY2tDbG9zZSA9IGZ1bmN0aW9uIGhhbmRsZXJGb3JtSGVhZGVyQ2xpY2tDbG9zZShlKSB7XHJcbiAgICBmb3JtX2hlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybS1oZWFkZXItLXNob3dcIik7XHJcbiAgICBvdmVybGF5X3Nob3cuY2xhc3NMaXN0LnJlbW92ZShcIm92ZXJsYXktLXNob3dcIik7XHJcbn07XHJcbmlmIChjbG9zZV9mb3JtICE9IG51bGwpIHtcclxuICAgIGNsb3NlX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZXJGb3JtSGVhZGVyQ2xpY2tDbG9zZSk7XHJcbn1cclxubGV0IGhhbmRsZXJDbGlja092ZXJsYXlDbG9zZSA9IGZ1bmN0aW9uIGhhbmRsZXJDbGlja092ZXJsYXlDbG9zZShlKSB7XHJcbiAgICBvdmVybGF5X3Nob3cuY2xhc3NMaXN0LnJlbW92ZShcIm92ZXJsYXktLXNob3dcIik7XHJcbiAgICBzb3J0aW5nX3dyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZShcInByb2R1Y3RzX19zb3J0aW5nLXdyYXBwZXItLWFjdGl2ZVwiKTtcclxuICAgIGZvcm1faGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtLWhlYWRlci0tc2hvd1wiKTtcclxuICAgIGxldCBwcmljZXNfX3N1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJpY2VzX19zdWJtaXQtLWRpc2FibGVcIik7XHJcbiAgICBsZXQgcHJpY2VfbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJpY2VzX19saXN0LS1zaG93XCIpO1xyXG4gICAgaWYgKHByaWNlX2xpc3QgIT0gbnVsbCkge1xyXG4gICAgICAgIHByaWNlX2xpc3QuY2xhc3NMaXN0LnJlbW92ZShcInByaWNlc19fbGlzdC0tc2hvd1wiKTtcclxuICAgIH1cclxuICAgIGlmIChwcmljZXNfX3N1Ym1pdCAhPSBudWxsKSB7XHJcbiAgICAgICAgcHJpY2VzX19zdWJtaXQuY2xhc3NMaXN0LnJlbW92ZShcInByaWNlc19fc3VibWl0LS1kaXNhYmxlXCIpO1xyXG4gICAgfVxyXG59O1xyXG5cclxubGV0IGhhbmRsZXJDaGFuZ2VWaWV2T25MaW5lID0gZnVuY3Rpb24gaGFuZGxlckNoYW5nZVZpZXZPbkxpbmUoZSkge1xyXG4gICAgLy8gY29uc29sZS5kaXIoZS50YXJnZXQpO1xyXG4gICAgbGV0IGl0ZW0gPSBlLnRhcmdldDtcclxuICAgIGlmIChpdGVtLmNoZWNrZWQgJiYgaXRlbS5pZCA9PSBcImxpbmVcIikge1xyXG4gICAgICAgIHByb2R1Y3RzX19hbGxfd3JhcHBlci5jbGFzc0xpc3QuYWRkKFwicHJvZHVjdHNfX2FsbC13cmFwcGVyLS1saW5lXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKGl0ZW0uY2hlY2tlZCAmJiBpdGVtLmlkID09IFwic3F1ZXJhXCIpIHtcclxuICAgICAgICBwcm9kdWN0c19fYWxsX3dyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZShcInByb2R1Y3RzX19hbGwtd3JhcHBlci0tbGluZVwiKTtcclxuICAgIH1cclxufTtcclxuaWYgKHZpZXdfcHJvZHVjdCAhPSBudWxsKSB7XHJcbiAgICB2aWV3X3Byb2R1Y3QuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGhhbmRsZXJDaGFuZ2VWaWV2T25MaW5lKTtcclxufVxyXG5cclxubGV0IGhhbmRsZXJDbGlja0NvcHkgPSBmdW5jdGlvbiBoYW5kbGVyQ2xpY2tDb3B5KCkge1xyXG4gICAgY29weV9pbnB1dC5zZWxlY3QoKTtcclxuICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiY29weVwiKTtcclxufTtcclxuaWYgKGNvcHlfYnRuICE9IG51bGwpIHtcclxuICAgIGNvcHlfYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlckNsaWNrQ29weSk7XHJcbn1cclxuXHJcbmxldCBoYW5kbGVyQ2hlY2sgPSBmdW5jdGlvbiBoYW5kbGVyQ2hlY2soZSkge1xyXG4gICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcclxuICAgICAgICBkb2N1bWVudF9pbnB1dC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIGhpZ2hfcHJpY2UuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnRfaW5wdXQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIGhpZ2hfcHJpY2UuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59O1xyXG5pZiAoZG9nb3Zvcl9jaGVjayAhPSBudWxsKSB7XHJcbiAgICBkb2dvdm9yX2NoZWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGhhbmRsZXJDaGVjayk7XHJcbn1cclxubGV0IGhhbmRsZXJDaGVja0Rlc2NyaXB0aW9uID0gZnVuY3Rpb24gaGFuZGxlckNoZWNrRGVzY3JpcHRpb24oZSkge1xyXG4gICAgbGV0IGl0ZW0gPSBlLnRhcmdldDtcclxuICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygnYWRkLWFkdmVydF9faWNvbicpKSB7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QudG9nZ2xlKFwiZmEtbWludXNcIik7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QudG9nZ2xlKFwiZmEtcGx1c1wiKTtcclxuICAgIH1cclxufTtcclxuaWYgKGFkZF9hZHZlcnRfbGlzdCAhPSBudWxsKSB7XHJcbiAgICBhZGRfYWR2ZXJ0X2xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVyQ2hlY2tEZXNjcmlwdGlvbik7XHJcbn1cclxubGV0IGhhbmRsZXJSYWRpb0NoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZXJSYWRpb0NoYW5nZShlKSB7XHJcbiAgICBsZXQgaXRlbSA9IGUudGFyZ2V0O1xyXG4gICAgaWYgKGl0ZW0ubm9kZU5hbWUgPT09IFwiSU5QVVRcIiAmJiBpdGVtLmNsYXNzTGlzdC5jb250YWlucygnYWNjb3VudF9fcmFkaW8taW5wdXQnKSkge1xyXG4gICAgICAgIGxldCBpZCA9IGl0ZW0uaWQ7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjY291bnRfX3BhcmFtcy1zaG93JykuY2xhc3NMaXN0LnJlbW92ZShcImFjY291bnRfX3BhcmFtcy1zaG93XCIpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY2NvdW50X18nICsgaWQpLmNsYXNzTGlzdC5hZGQoXCJhY2NvdW50X19wYXJhbXMtc2hvd1wiKTtcclxuICAgIH1cclxufTtcclxuaWYgKGFjY291bnRfX3JhZGlvX2xpc3QgIT0gbnVsbCkge1xyXG4gICAgYWNjb3VudF9fcmFkaW9fbGlzdC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGhhbmRsZXJSYWRpb0NoYW5nZSk7XHJcbn1cclxubGV0IGNvdW50QWRkcmVzcyA9IDE7XHJcbmxldCBoYW5kbGVyQ2xpY2tBZGRBZGRyZXNzID0gZnVuY3Rpb24gaGFuZGxlckNsaWNrQWRkQWRkcmVzcyhlKSB7XHJcbiAgICBsZXQgaXRlbSA9IGUudGFyZ2V0O1xyXG4gICAgaWYgKChpdGVtLm5vZGVOYW1lID09PSBcIkxBQkVMXCIgfHwgaXRlbS5ub2RlTmFtZSA9PT0gXCJJXCIpIHx8IGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdwcm9maWxlLXBhZ2VfX3BhcmFtcy1pY29ucycpKSB7XHJcbiAgICAgICAgbGV0IGxpc3RfYWRkcmVzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYXJhbXMtY3JlYXRlZF9fbGlzdC1hZGRyZXNzJyk7XHJcbiAgICAgICAgbGV0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgICAgICBsYWJlbC5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLXBhZ2VfX3BhcmFtcy1sYWJlbCcpO1xyXG4gICAgICAgIGxhYmVsLmZvciA9ICdhZGRyZXNzJyArIGNvdW50QWRkcmVzcztcclxuICAgICAgICBsYWJlbC5pbm5lclRleHQgPSAn0JTQvtC/0L7Qu9C90LjRgtC10LvRjNC90YvQuSDQsNC00YDQtdGB0YEg4oSWICcgKyBjb3VudEFkZHJlc3M7XHJcbiAgICAgICAgbGV0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLXBhZ2VfX3BhcmFtcy1pbnB1dCcpO1xyXG4gICAgICAgIGlucHV0LmlkID0gJ2FkZHJlc3MnICsgY291bnRBZGRyZXNzO1xyXG4gICAgICAgIGlucHV0LnR5cGUgPSAndGV4dCc7XHJcbiAgICAgICAgaW5wdXQucmVxdWlyZWQgPSB0cnVlO1xyXG4gICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gJ9Cj0LrQsNC20LjRgtC1INCy0LDRiCDQtNC+0L/QvtC70L3QuNGC0LXQu9GM0L3Ri9C5INCw0LTRgNC10YEg0L3QsNGF0L7QttC00LXQvdC40Y8nO1xyXG4gICAgICAgIGlucHV0Lm5hbWUgPSAnYWRkcmVzcycgKyBjb3VudEFkZHJlc3M7XHJcbiAgICAgICAgbGlzdF9hZGRyZXNzLmFwcGVuZChsYWJlbCwgaW5wdXQpO1xyXG4gICAgICAgIGNvdW50QWRkcmVzcysrO1xyXG4gICAgfVxyXG59O1xyXG5pZiAoYWRkX2FkZHJlc3NfYWRkaXRpb25hbCAhPSBudWxsKSB7XHJcbiAgICBhZGRfYWRkcmVzc19hZGRpdGlvbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlckNsaWNrQWRkQWRkcmVzcyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dfaGlkZV9wYXNzd29yZCh0YXJnZXQpIHtcclxuICAgIGxldCBpbnB1dCA9IHRhcmdldC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXBhZ2VfX3BhcmFtcy1pbnB1dCcpO1xyXG4gICAgbGV0IGZhcyA9IHRhcmdldC5xdWVyeVNlbGVjdG9yKCcuZmFzJyk7XHJcbiAgICBpZiAoaW5wdXQuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT0gJ3Bhc3N3b3JkJykge1xyXG4gICAgICAgIGZhcy5jbGFzc0xpc3QucmVtb3ZlKCdmYS1leWUtc2xhc2gnKTtcclxuICAgICAgICBmYXMuY2xhc3NMaXN0LmFkZCgnZmEtZXllJyk7XHJcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmFzLmNsYXNzTGlzdC5hZGQoJ2ZhLWV5ZS1zbGFzaCcpO1xyXG4gICAgICAgIGZhcy5jbGFzc0xpc3QucmVtb3ZlKCdmYS1leWUnKTtcclxuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAncGFzc3dvcmQnKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxubGV0IGhhbmRsZXJGaWxlTG9hZCA9IGZ1bmN0aW9uICBoYW5kbGVyRmlsZUxvYWQoZSkge1xyXG5cclxufTtcclxuaWYgKGZpbGVfcHJvZmlsZSAhPSBudWxsKSB7XHJcbiAgICBmaWxlX3Byb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBoYW5kbGVyRmlsZUxvYWQpO1xyXG59XHJcblxyXG4iXX0=
